<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Heightmap : Extract data from NASA Blue Marble Next Generation and write to heightmap and texture png images" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Heightmap</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/AlbertVeli/heightmap">View on GitHub</a>

          <h1 id="project_title">Heightmap</h1>
          <h2 id="project_tagline">Extract data from NASA Blue Marble Next Generation and write to heightmap and texture png images</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/AlbertVeli/heightmap/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/AlbertVeli/heightmap/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>Proggy to read heightmap data from the file <em>srtm_ramp2.world.86400x43200.bin</em>
and write the wanted area of the world to one 16-bit grayscale png heightmap image
and one texture rgb png image. The wanted area is specified in latitudes/longitudes.</p>

<p><strong>PREPARATION</strong></p>

<p>Before running the program the first time, the files:</p>

<ul>
<li>srtm_ramp2.world.86400x43200.bin.gz</li>
<li>world.topo.bathy.200410.3x21600x10800.png</li>
</ul><p>needs to be downloaded into the
<a href="https://github.com/AlbertVeli/heightmap/blob/master/datafiles/">datafiles</a>
directory. These files are part of the NASA Blue Marble Next Generation project
and can be found at:</p>

<p>Webpage: <a href="http://visibleearth.nasa.gov/view.php?id=73934">http://visibleearth.nasa.gov/view.php?id=73934</a><br>
Mirror: <a>ftp://neo.sci.gsfc.nasa.gov/bluemarble/bmng/</a></p>

<p>The script
<a href="https://github.com/AlbertVeli/heightmap/blob/master/datafiles/get_datafiles.sh">get_datafiles.sh</a>
automatically downloads these files and unpacks the gzipped srtm file.</p>

<p>Checkout the program and build it:</p>

<pre><code>git clone git://github.com/AlbertVeli/heightmap.git
cd heightmap
make
</code></pre>

<p>The make command will build the hm program and run the get_datafiles.sh
script to download the files and unzip the srtm file.</p>

<p><strong>DEPENDENCIES</strong></p>

<p>Ubuntu (apt-get install):</p>

<ul>
<li>build-essential</li>
<li>libpng-dev</li>
<li>libtiff-dev</li>
</ul><p>Gentoo (emerge -av):</p>

<ul>
<li>media-libs/libpng</li>
<li>media-libs/tiff</li>
</ul><p>Macports (port install):</p>

<ul>
<li>libpng</li>
<li>tiff</li>
</ul><p>MinGW (install manually from gnuwin32.sourceforge.net):</p>

<ul>
<li>LibPng</li>
<li>LibTiff</li>
</ul><p>You also need gunzip from the package gzip to unzip the srtm datafile. It is
installed by default in all of the above.</p>

<p><strong>USAGE</strong></p>

<pre><code>hm [OPTIONS] &lt;latitude&gt; &lt;longitude&gt; &lt;lat. span&gt; &lt;long. span&gt; &lt;basename&gt;
</code></pre>

<p>Use decimal fractions for latitude/longitude/spans.  </p>

<blockquote>
<p><em>latitude</em> (North/South) - in range 90 (° N) to -90 (° S)<br><em>longitude</em> (West/East) - in range -180 (° W) to 180 (° E)<br><em>latitude span</em> - height of the wanted area in degrees<br><em>longitude span</em> - width of the wanted area in degrees<br><em>basename</em> - common beginning of the two filenames to save output to</p>
</blockquote>

<p><strong>OPTIONS</strong></p>

<pre><code>-h &lt;FILE&gt; - Datafile for heightmap instead of default
-t &lt;FILE&gt; - Datafile for texture instead of default
-v        - Verbose output
</code></pre>

<p><strong>EXAMPLE</strong></p>

<p>To generate images <em>scandinavia_heightmap.png</em> and <em>scandinavia_texture.png</em>
for the Scandinavia area (74° N, 3° E, span 19°, 27°), run:</p>

<pre><code>./hm 74 3 19 27 scandinavia
</code></pre>

<p>Use a map, terrestrial globe, google maps or other web service to figure
out latitudes/longitudes. In google maps, zoom into an area and
copy the URL (click on the share button). It could look something like:</p>

<p><a href="https://maps.google.com/?ll=53.91081,-5.50415&amp;spn=7.374845,13.557129">https://maps.google.com/?ll=53.91081,-5.50415&amp;spn=7.374845,13.557129</a></p>

<p>Here the center is at <em>53.91081° N</em>, <em>5.50415° W</em> and the
height/width span of the map in degrees are <em>7.374845°</em>, <em>13.557129°</em>.
To get to the upper left corner, move one half span in each direction.</p>

<p>The arguments to cut out the corresponding area with this program:</p>

<pre><code>53.91081 + 7.374845/2  ; North (up) half height span
-5.50415 - 13.557129/2 ; West (left) half width span
7.374845               ; Height span
13.557129              ; Width span
</code></pre>

<p>If you calculate the coordinates the command line will be:</p>

<pre><code>./hm 57.5982325 -12.2827145 7.374845 13.557129 ireland
</code></pre>

<p>Image rendered in Blender simulating a 40m sea level rise over Ireland
using the exact command line shown above. See instruction video below
for information on how to render the image in Blender.</p>

<p><img src="https://raw.github.com/AlbertVeli/heightmap/gh-pages/images/ireland.png" alt="ireland"></p>

<p><strong>ELEVATION DATAFILE</strong></p>

<p>In the heightmap data each pixel represent average height
(meters above sea) of an area with a signed 16-bit
integer (big endian).</p>

<p>Dimension of the srtm data is 86400x43200. Upper left pixel is at
90° N, 180° W and bottom right is at is at 90° S, 180° E.
Each pixel is thus 360/86400° = 15 arcseconds ~= 500m (at the equator).
1 arcsecond = 1/3600:th of a degree. Longitudes are distorted towards the
poles while latitudes are roughly 500m per pixel through the whole range.</p>

<p><strong>INSTRUCTION VIDEO</strong></p>

<p>This video shows how to compile and use the program. It also shows how
the generated heightmap and texture files can be rendered with
<a href="http://www.blender.org/">Blender</a>.</p>

<p><iframe width="640" height="360" src="http://www.youtube.com/embed/1nKxmyudoLI" frameborder="0" allowfullscreen></iframe></p>

<p><strong>LICENSE</strong></p>

<pre><code>~~=) All Rights Reversed - No Rights Reserved (=~~
</code></pre>

<p>Prickle-Prickle, the 9th day of Chaos in the YOLD 3179</p>

<p>Albert Veli</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Heightmap maintained by <a href="https://github.com/AlbertVeli">AlbertVeli</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
